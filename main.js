(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{x:()=>w});var t=document.querySelectorAll(".popup"),n=document.querySelector("#popupAvatar"),r=document.querySelector("#popupEdit"),o=document.querySelector("#popupAdd"),c=document.querySelector("#popupImage"),a=document.querySelector("#popupDelete"),u=document.querySelector(".profile__image"),i=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),s=document.querySelector("#avatar"),d=document.querySelector("#edit"),f=document.querySelector("#add"),m=document.querySelector("#delete"),p=document.querySelector("#url-avatar"),v=document.querySelector(".profile__title"),y=document.querySelector(".profile__text"),h=document.querySelector("#person-input"),_=document.querySelector("#about-input"),b=document.querySelector("#place-input"),S=document.querySelector("#url-input"),q=document.querySelector(".cards"),g=c.querySelector(".popup__image"),E=c.querySelector(".popup__text"),L={baseUrl:"https://nomoreparties.co/v1/wbc-cohort-1",headers:{authorization:"61650a97-0198-4977-9b18-131273aaff2f","Content-Type":"application/json"}};function k(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}function C(e){console.log(e)}function x(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",U)}function A(e){e.classList.add("popup_opened"),document.addEventListener("keydown",U)}function U(e){"Escape"===e.key&&x(document.querySelector(".popup_opened"))}var w,O=null;function j(e){var t=document.querySelector("#card-template").content.querySelector(".card__item").cloneNode(!0),n=t.querySelector(".card__image"),r=t.querySelector(".card__delete-button"),o=t.querySelector(".card__like-button"),u=t.querySelector(".card__like-counter");n.src=e.link,n.alt=e.name,t.id=e._id,t.querySelector(".card__title").textContent=e.name,u.textContent=e.likes.length,o.addEventListener("click",(function(){o.classList.contains("card__like-button_active")?function(e,t,n){return(r=e.id,fetch("".concat(L.baseUrl,"/cards/likes/").concat(r),{method:"DELETE",headers:L.headers}).then(k)).then((function(e){t.classList.remove("card__like-button_active"),n.textContent=e.likes.length})).catch(C);var r}(t,o,u):function(e,t,n){return(r=e.id,fetch("".concat(L.baseUrl,"/cards/likes/").concat(r),{method:"PUT",headers:L.headers}).then(k)).then((function(e){t.classList.add("card__like-button_active"),n.textContent=e.likes.length})).catch(C);var r}(t,o,u)}));for(var i=0;i<e.likes.length;i++)e.likes[i]._id===w&&o.classList.add("card__like-button_active");return r.addEventListener("click",(function(e){O=e.target.closest(".card__item"),A(a)})),e.owner._id!==w&&r.remove(),n.addEventListener("click",(function(){g.src=e.link,g.alt=e.name,E.textContent=e.name,A(c)})),t}function P(e,t){var n=document.querySelector(".".concat(e.id,"-error"));e.classList.remove(t.inputErrorClass),n.classList.remove(t.errorClass),n.textContent=""}function T(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(e){P(e,t)})),D(r,t)}function D(e,t){var n=t.inactiveButtonClass;e.classList.add(n),e.disabled=!0}function B(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?function(e,t){var n=t.inactiveButtonClass;e.classList.remove(n),e.disabled=!1}(t,n):D(t,n)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Сохранить";t.textContent=e?"Сохранение...":n}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J,H={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type-error",errorClass:"form__input-error_active"};u.addEventListener("click",(function(){s.reset(),T(s,H),A(n)})),i.addEventListener("click",(function(){h.value=v.textContent,_.value=y.textContent,T(d,H),A(r)})),l.addEventListener("click",(function(){f.reset(),T(f,H),A(o)})),s.addEventListener("submit",(function(e){var t;e.preventDefault(),I(!0,e.submitter),(t=p.value,fetch("".concat(L.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:L.headers,body:JSON.stringify({avatar:t})}).then(k)).then((function(e){u.style.backgroundImage="url(".concat(e.avatar,")")})).then((function(){return x(n)})).finally((function(){I(!1,e.submitter)}))})),d.addEventListener("submit",(function(e){var t,n;e.preventDefault(),I(!0,e.submitter),(t=h.value,n=_.value,fetch("".concat(L.baseUrl,"/users/me"),{method:"PATCH",headers:L.headers,body:JSON.stringify({name:t,about:n})}).then(k)).then((function(e){v.textContent=e.name,y.textContent=e.about})).then((function(){return x(r)})).finally((function(){I(!1,e.submitter)}))})),f.addEventListener("submit",(function(e){var t,n;e.preventDefault(),I(!0,e.submitter),(t=b.value,n=S.value,fetch("".concat(L.baseUrl,"/cards"),{method:"POST",headers:L.headers,body:JSON.stringify({name:t,link:n})}).then(k)).then((function(e){q.prepend(j(e))})).then((function(){return x(o)})).finally((function(){I(!1,e.submitter)}))})),m.addEventListener("submit",(function(e){return e.preventDefault(),(t=O.id,fetch("".concat(L.baseUrl,"/cards/").concat(t),{method:"DELETE",headers:L.headers}).then(k)).then((function(){O.remove(),x(a),O=null})).catch(C);var t})),t.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&x(e),t.target.classList.contains("popup__close-button")&&x(e)}))})),J=H,Array.from(document.querySelectorAll(J.formSelector)).forEach((function(e){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);B(n,r,t),n.forEach((function(e){e.addEventListener("input",(function(){(function(e,t){e.validity.valid?P(e,t):function(e,t,n){var r=document.querySelector(".".concat(e.id,"-error"));e.classList.add(n.inputErrorClass),r.classList.add(n.errorClass),r.textContent=t}(e,e.validationMessage,t)})(e,t),B(n,r,t)}))}))}(e,J)})),Promise.all([fetch("".concat(L.baseUrl,"/users/me"),{headers:L.headers}).then(k),fetch("".concat(L.baseUrl,"/cards"),{headers:L.headers}).then(k)]).then((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),n=t[0],r=t[1];w=n._id,v.textContent=n.name,y.textContent=n.about,u.style.backgroundImage="url(".concat(n.avatar,")"),console.log(n);for(var o=0;o<r.length;o++)q.append(j(r[o]));console.log(r)})).catch(C)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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STlDLEVBQU9DLFFBQVgsVUFBNEIsQ0FDdENDLFFBQVNGLEVBQU9FLFVBRWY4QyxLQUFLNUMsS0d1RVA0QyxNQUFLLFNBQVUsR0FBbUIsTSxrMUJBQUEsTUFBbEI4QyxFQUFrQixLQUFSSyxFQUFRLEtBQ2pDMUUsRUFBU3FFLEVBQVNyRCxJQUNsQmxELEVBQVNtRCxZQUFjb0QsRUFBU3ZELEtBQ2hDL0MsRUFBVWtELFlBQWNvRCxFQUFTSSxNQUNqQ25ILEVBQWNnSCxNQUFNQyxnQkFBcEIsY0FBNkNGLEVBQVNOLE9BQXRELEtBQ0EzRSxRQUFRQyxJQUFJZ0YsR0FFWixJQUFLLElBQUkxQyxFQUFJLEVBQUdBLEVBQUkrQyxFQUFNdkQsT0FBUVEsSUFDaEN2RCxFQUFlOEcsT0FBT2hGLEVBQVd3RSxFQUFNL0MsS0FFekN2QyxRQUFRQyxJQUFJcUYsRUFDYixJQUNBbEQsTUFBTXRDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvdmFyaWFibGVzLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL21vZGFsLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvdmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiZXhwb3J0IGNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwQXZhdGFyJyk7XG5leHBvcnQgY29uc3QgcG9wdXBFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwRWRpdCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwQWRkJyk7XG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cEltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBEZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBEZWxldGUnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgYnV0dG9uT3BlbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBmb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2F2YXRhcicpO1xuZXhwb3J0IGNvbnN0IGZvcm1FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VkaXQnKTtcbmV4cG9ydCBjb25zdCBmb3JtQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkZCcpO1xuZXhwb3J0IGNvbnN0IGZvcm1EZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGVsZXRlJyk7XG5leHBvcnQgY29uc3QgaW5wdXRBdmF0YXJVcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXJsLWF2YXRhcicpO1xuZXhwb3J0IGNvbnN0IHVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RpdGxlJyk7XG5leHBvcnQgY29uc3QgdXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3RleHQnKTtcbmV4cG9ydCBjb25zdCBpbnB1dFVzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BlcnNvbi1pbnB1dCcpO1xuZXhwb3J0IGNvbnN0IGlucHV0VXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Fib3V0LWlucHV0Jyk7XG5leHBvcnQgY29uc3QgaW5wdXRQbGFjZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGxhY2UtaW5wdXQnKTtcbmV4cG9ydCBjb25zdCBpbnB1dFBsYWNlVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VybC1pbnB1dCcpO1xuZXhwb3J0IGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzJyk7XG5leHBvcnQgY29uc3QgcG9wdXBJbWcgPSBwb3B1cEltYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbmV4cG9ydCBjb25zdCBwb3B1cFR4dCA9IHBvcHVwSW1hZ2UucXVlcnlTZWxlY3RvcignLnBvcHVwX190ZXh0Jyk7IiwiLy8vQ29uZmlnLy8vXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBiYXNlVXJsOiBgaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL3diYy1jb2hvcnQtMWAsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnNjE2NTBhOTctMDE5OC00OTc3LTliMTgtMTMxMjczYWFmZjJmJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn1cblxuLy8v0KTRg9C90LrRhtC40Y8g0L/RgNC+0LLQtdGA0LrQuCDQvtGC0LLQtdGC0LAvLy9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgaWYgKHJlcy5vaykge1xuICAgIHJldHVybiByZXMuanNvbigpO1xuICB9XG4gIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG59XG5cbi8vL9Ce0YjQuNCx0LrQuCwg0LrQvtGC0L7RgNGL0LUg0L/QvtC/0LDQtNCw0Y7RgiDQsiAuY2F0Y2gvLy9cbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVFcnJvcihlcnIpIHtcbiAgY29uc29sZS5sb2coZXJyKTtcbn1cblxuLy/Ql9Cw0LPRgNGD0LfQutCwINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDRgSDRgdC10YDQstC10YDQsC8vLy9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2ZXJVc2VyRGF0YSgpIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9CX0LDQs9GA0YPQt9C60LAg0LrQsNGA0YLQvtGH0LXQuiDRgSDRgdC10YDQstC10YDQsC8vLy9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2ZXJJbml0aWFsQ2FyZHMoKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXG4gIH0pXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXG59XG5cbi8vLy/QntCx0L3QvtCy0LvQtdC90LjQtSDQsNCy0LDRgtCw0YDQsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8vLy8vXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2hVc2VyQXZhdGFyKGF2YXRhcikge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXIgfSlcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9Cg0LXQtNCw0LrRgtC40YDQvtCy0LDQvdC40LUg0L/RgNC+0YTQuNC70Y8vLy8vXG5leHBvcnQgZnVuY3Rpb24gcGF0Y2hVc2VyRGF0YShuYW1lLCBhYm91dCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWUsIGFib3V0IH0pXG4gIH0pXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXG59XG5cbi8vLy/QlNC+0LHQsNCy0LvQtdC90LjQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LgvLy8vXG5leHBvcnQgZnVuY3Rpb24gcG9zdE5ld0NhcmQobmFtZSwgbGluaykge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzYCwge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KVxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLy8v0KPQtNCw0LvQtdC90LjQtSDRgtC+0LvRjNC60L4g0YHQstC+0LXQuSDQutCw0YDRgtC+0YfQutC4Ly8vL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVNlcnZlckNhcmQoaWQpIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS9jYXJkcy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzXG4gIH0pXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXG59XG5cbi8vLy/QlNC+0LHQsNCy0LvQtdC90LjQtSDQu9Cw0LnQutCwLy8vL1xuZXhwb3J0IGZ1bmN0aW9uIGxpa2VDYXJkKGlkKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiAnUFVUJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9Cj0LTQsNC70LXQvdC40LUg0LvQsNC50LrQsC8vLy9cbmV4cG9ydCBmdW5jdGlvbiBkaXNsaWtlQ2FyZChpZCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXG4gIH0pXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXG59IiwiZXhwb3J0IGZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXApIHtcbiAgcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZVBvcHVwRXNjKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG9wZW5Qb3B1cChwb3B1cCkge1xuICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlUG9wdXBFc2MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cEVzYyhldmVudCkge1xuICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW5lZCcpO1xuICAgIGNsb3NlUG9wdXAocG9wdXApO1xuICB9XG59IiwiaW1wb3J0IHsgaGFuZGxlRXJyb3IsIGxpa2VDYXJkLCBkaXNsaWtlQ2FyZCwgZGVsZXRlU2VydmVyQ2FyZCB9IGZyb20gXCIuL2FwaS5qc1wiO1xuaW1wb3J0IHsgY2xvc2VQb3B1cCwgb3BlblBvcHVwIH0gZnJvbSAnLi9tb2RhbC5qcyc7XG5pbXBvcnQgeyBwb3B1cERlbGV0ZSwgcG9wdXBJbWFnZSwgcG9wdXBJbWcsIHBvcHVwVHh0IH0gZnJvbSAnLi92YXJpYWJsZXMuanMnO1xuaW1wb3J0IHsgdXNlcklkIH0gZnJvbSAnLi9pbmRleC5qcydcblxuZXhwb3J0IGxldCBkZWxldGVkU2VydmVyQ2FyZCA9IG51bGw7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmQpIHtcbiAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmQtdGVtcGxhdGUnKS5jb250ZW50O1xuICBjb25zdCBjYXJkTmV3ID0gY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pdGVtJykuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkTmV3LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xuICBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmROZXcucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJyk7XG4gIGNvbnN0IGxpa2VDb3VudGVyID0gY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XG4gIGNhcmRJbWFnZS5zcmMgPSBjYXJkLmxpbms7XG4gIGNhcmRJbWFnZS5hbHQgPSBjYXJkLm5hbWU7XG4gIGNhcmROZXcuaWQgPSBjYXJkLl9pZDtcbiAgY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IGNhcmQubmFtZTtcbiAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aDtcbiAgLy8vL0xpa2UvLy8vXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpKSB7XG4gICAgICBkZWxldGVMaWtlKGNhcmROZXcsIGNhcmRMaWtlQnV0dG9uLCBsaWtlQ291bnRlcilcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkTGlrZShjYXJkTmV3LCBjYXJkTGlrZUJ1dHRvbiwgbGlrZUNvdW50ZXIpXG4gICAgfVxuICB9KVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcmQubGlrZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoY2FyZC5saWtlc1tpXS5faWQgPT09IHVzZXJJZCkge1xuICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XG4gICAgfVxuICB9XG4gIC8vLy9EZWxldGUvLy8vXG4gIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBkZWxldGVkU2VydmVyQ2FyZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuY2FyZF9faXRlbScpXG4gICAgb3BlblBvcHVwKHBvcHVwRGVsZXRlKTtcbiAgfSlcbiAgaWYgKGNhcmQub3duZXIuX2lkICE9PSB1c2VySWQpIHtcbiAgICBjYXJkRGVsZXRlQnV0dG9uLnJlbW92ZSgpXG4gIH1cbiAgLy8vL0Z1bGwgSW1hZ2UvLy8vXG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBwb3B1cEltZy5zcmMgPSBjYXJkLmxpbms7XG4gICAgcG9wdXBJbWcuYWx0ID0gY2FyZC5uYW1lO1xuICAgIHBvcHVwVHh0LnRleHRDb250ZW50ID0gY2FyZC5uYW1lO1xuICAgIG9wZW5Qb3B1cChwb3B1cEltYWdlKTtcbiAgfSk7XG4gIC8vLy9OZXcgY2FyZC8vLy9cbiAgcmV0dXJuIGNhcmROZXc7XG59XG5cbi8vLy9EZWxldGUvLy8vXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ2FyZChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICByZXR1cm4gZGVsZXRlU2VydmVyQ2FyZChkZWxldGVkU2VydmVyQ2FyZC5pZClcbiAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBkZWxldGVkU2VydmVyQ2FyZC5yZW1vdmUoKTtcbiAgICAgIGNsb3NlUG9wdXAocG9wdXBEZWxldGUpO1xuICAgICAgZGVsZXRlZFNlcnZlckNhcmQgPSBudWxsO1xuICAgIH0pXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKVxufVxuXG4vLy8vTGlrZS8vLy9cbmZ1bmN0aW9uIGFkZExpa2UoY2FyZE5ldywgY2FyZExpa2VCdXR0b24sIGxpa2VDb3VudGVyKSB7XG4gIHJldHVybiBsaWtlQ2FyZChjYXJkTmV3LmlkKVxuICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUxpa2UoY2FyZE5ldywgY2FyZExpa2VCdXR0b24sIGxpa2VDb3VudGVyKSB7XG4gIHJldHVybiBkaXNsaWtlQ2FyZChjYXJkTmV3LmlkKVxuICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG59IiwiaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xuXG5pbXBvcnQge1xuICBwb3B1cHMsIHBvcHVwQXZhdGFyLCBwb3B1cEVkaXQsIHBvcHVwQWRkLFxuICBwcm9maWxlQXZhdGFyLCBidXR0b25PcGVuRWRpdCwgYnV0dG9uT3BlbkFkZCxcbiAgZm9ybUF2YXRhciwgZm9ybUVkaXQsIGZvcm1BZGQsXG4gIHVzZXJOYW1lLCB1c2VyQWJvdXQsIGlucHV0VXNlck5hbWUsIGlucHV0VXNlckFib3V0LFxuICBpbnB1dEF2YXRhclVybCwgaW5wdXRQbGFjZU5hbWUsIGlucHV0UGxhY2VVcmwsXG4gIGNhcmRzQ29udGFpbmVyLFxuICBmb3JtRGVsZXRlXG59IGZyb20gJy4vdmFyaWFibGVzLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNhcmQsIGRlbGV0ZUNhcmQgfSBmcm9tICcuL2NhcmQuanMnO1xuaW1wb3J0IHsgcmV2YWxpZGF0ZUZvcm0sIGVuYWJsZVZhbGlkYXRpb24gfSBmcm9tICcuL3ZhbGlkYXRlLmpzJztcbmltcG9ydCB7IGNsb3NlUG9wdXAsIG9wZW5Qb3B1cCB9IGZyb20gJy4vbW9kYWwuanMnO1xuaW1wb3J0IHtcbiAgZ2V0U2VydmVyVXNlckRhdGEsIGdldFNlcnZlckluaXRpYWxDYXJkcyxcbiAgcGF0Y2hVc2VyQXZhdGFyLCBwYXRjaFVzZXJEYXRhLCBwb3N0TmV3Q2FyZCwgaGFuZGxlRXJyb3Jcbn0gZnJvbSAnLi9hcGkuanMnO1xuaW1wb3J0IHsgcmVuZGVyTG9hZGluZyB9IGZyb20gJy4vdXRpbHMuanMnXG5cbmV4cG9ydCBsZXQgdXNlcklkO1xuXG5jb25zdCBtZXN0b1NlbGVjdG9ycyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0LWJ1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZS1lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxufVxuXG5wcm9maWxlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwQXZhdGFyKTtcbmJ1dHRvbk9wZW5FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwRWRpdCk7XG5idXR0b25PcGVuQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwQWRkKTtcbmZvcm1BdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybUF2YXRhcik7XG5mb3JtRWRpdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXRGb3JtRWRpdCk7XG5mb3JtQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm1BZGQpO1xuZm9ybURlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBkZWxldGVDYXJkKTtcblxucG9wdXBzLmZvckVhY2goKHBvcHVwKSA9PiB7XG4gIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xuICAgICAgY2xvc2VQb3B1cChwb3B1cClcbiAgICB9XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xuICAgICAgY2xvc2VQb3B1cChwb3B1cClcbiAgICB9XG4gIH0pXG59KVxuXG5mdW5jdGlvbiBzdWJtaXRGb3JtQXZhdGFyKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHJlbmRlckxvYWRpbmcodHJ1ZSwgZXZlbnQuc3VibWl0dGVyKTtcbiAgcGF0Y2hVc2VyQXZhdGFyKGlucHV0QXZhdGFyVXJsLnZhbHVlKVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dXNlckRhdGEuYXZhdGFyfSlgO1xuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4gY2xvc2VQb3B1cChwb3B1cEF2YXRhcikpXG4gICAgLmZpbmFsbHkoKCkgPT4geyByZW5kZXJMb2FkaW5nKGZhbHNlLCBldmVudC5zdWJtaXR0ZXIpIH0pXG59XG5cbmZ1bmN0aW9uIHN1Ym1pdEZvcm1FZGl0KGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHJlbmRlckxvYWRpbmcodHJ1ZSwgZXZlbnQuc3VibWl0dGVyKVxuICBwYXRjaFVzZXJEYXRhKGlucHV0VXNlck5hbWUudmFsdWUsIGlucHV0VXNlckFib3V0LnZhbHVlKVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgICAgdXNlckFib3V0LnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBjbG9zZVBvcHVwKHBvcHVwRWRpdCkpXG4gICAgLmZpbmFsbHkoKCkgPT4geyByZW5kZXJMb2FkaW5nKGZhbHNlLCBldmVudC5zdWJtaXR0ZXIpIH0pXG59XG5cbmZ1bmN0aW9uIHN1Ym1pdEZvcm1BZGQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBldmVudC5zdWJtaXR0ZXIpXG4gIHBvc3ROZXdDYXJkKGlucHV0UGxhY2VOYW1lLnZhbHVlLCBpbnB1dFBsYWNlVXJsLnZhbHVlKVxuICAgIC50aGVuKChjYXJkcykgPT4ge1xuICAgICAgY2FyZHNDb250YWluZXIucHJlcGVuZChjcmVhdGVDYXJkKGNhcmRzKSk7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBjbG9zZVBvcHVwKHBvcHVwQWRkKSlcbiAgICAuZmluYWxseSgoKSA9PiB7IHJlbmRlckxvYWRpbmcoZmFsc2UsIGV2ZW50LnN1Ym1pdHRlcikgfSlcbn1cblxuZnVuY3Rpb24gb3BlblBvcHVwQXZhdGFyKCkge1xuICBmb3JtQXZhdGFyLnJlc2V0KCk7XG4gIHJldmFsaWRhdGVGb3JtKGZvcm1BdmF0YXIsIG1lc3RvU2VsZWN0b3JzKTtcbiAgb3BlblBvcHVwKHBvcHVwQXZhdGFyKTtcbn1cblxuZnVuY3Rpb24gb3BlblBvcHVwRWRpdCgpIHtcbiAgaW5wdXRVc2VyTmFtZS52YWx1ZSA9IHVzZXJOYW1lLnRleHRDb250ZW50O1xuICBpbnB1dFVzZXJBYm91dC52YWx1ZSA9IHVzZXJBYm91dC50ZXh0Q29udGVudDtcbiAgcmV2YWxpZGF0ZUZvcm0oZm9ybUVkaXQsIG1lc3RvU2VsZWN0b3JzKTtcbiAgb3BlblBvcHVwKHBvcHVwRWRpdCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Qb3B1cEFkZCgpIHtcbiAgZm9ybUFkZC5yZXNldCgpO1xuICByZXZhbGlkYXRlRm9ybShmb3JtQWRkLCBtZXN0b1NlbGVjdG9ycyk7XG4gIG9wZW5Qb3B1cChwb3B1cEFkZCk7XG59XG5cbmVuYWJsZVZhbGlkYXRpb24obWVzdG9TZWxlY3RvcnMpO1xuXG5Qcm9taXNlLmFsbChbZ2V0U2VydmVyVXNlckRhdGEoKSwgZ2V0U2VydmVySW5pdGlhbENhcmRzKCldKVxuICAudGhlbihmdW5jdGlvbiAoW3VzZXJEYXRhLCBjYXJkc10pIHtcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgIHVzZXJBYm91dC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xuICAgIHByb2ZpbGVBdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3VzZXJEYXRhLmF2YXRhcn0pYDtcbiAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSlcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNhcmRzQ29udGFpbmVyLmFwcGVuZChjcmVhdGVDYXJkKGNhcmRzW2ldKSlcbiAgICB9XG4gICAgY29uc29sZS5sb2coY2FyZHMpXG4gIH0pXG4gIC5jYXRjaChoYW5kbGVFcnJvcikiLCJleHBvcnQgZnVuY3Rpb24gc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIHNlbGVjdG9ycykge1xuICBjb25zdCBmb3JtRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHNlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3MpO1xuICBmb3JtRXJyb3IuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnMuZXJyb3JDbGFzcyk7XG4gIGZvcm1FcnJvci50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKSB7XG4gIGNvbnN0IGZvcm1FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcyk7XG4gIGZvcm1FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9ycy5lcnJvckNsYXNzKTtcbiAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gJyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSwgc2VsZWN0b3JzKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIHNlbGVjdG9ycyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQpIHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldmFsaWRhdGVGb3JtKGZvcm1FbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvblN1Ym1pdCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgaW5wdXRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGlucHV0RWxlbWVudCkge1xuICAgIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKTtcbiAgfSlcbiAgaW5hY3RpdmVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5hY3RpdmVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0LCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSkge1xuICBidXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgYnV0dG9uU3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2ZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQsIHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9KSB7XG4gIGJ1dHRvblN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b25TdWJtaXQuZGlzYWJsZWQgPSBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpIHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgaW5hY3RpdmVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpO1xuICB9IGVsc2Uge1xuICAgIGFjdGl2ZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQsIHNlbGVjdG9ycyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvblN1Ym1pdCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25TdWJtaXQsIHNlbGVjdG9ycyk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQpIHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25TdWJtaXQsIHNlbGVjdG9ycyk7XG4gICAgfSlcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oc2VsZWN0b3JzKSB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZm9ybUVsZW1lbnQpIHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgc2VsZWN0b3JzKTtcbiAgfSlcbn0iLCJleHBvcnQgZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhsb2FkaW5nLCBidXR0b24sIGJ1dHRvblRleHQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJykge1xuICBpZiAobG9hZGluZykge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLidcbiAgfSBlbHNlIHtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0XG4gIH1cbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwb3B1cHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cEF2YXRhciIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cEVkaXQiLCJwb3B1cEFkZCIsInBvcHVwSW1hZ2UiLCJwb3B1cERlbGV0ZSIsInByb2ZpbGVBdmF0YXIiLCJidXR0b25PcGVuRWRpdCIsImJ1dHRvbk9wZW5BZGQiLCJmb3JtQXZhdGFyIiwiZm9ybUVkaXQiLCJmb3JtQWRkIiwiZm9ybURlbGV0ZSIsImlucHV0QXZhdGFyVXJsIiwidXNlck5hbWUiLCJ1c2VyQWJvdXQiLCJpbnB1dFVzZXJOYW1lIiwiaW5wdXRVc2VyQWJvdXQiLCJpbnB1dFBsYWNlTmFtZSIsImlucHV0UGxhY2VVcmwiLCJjYXJkc0NvbnRhaW5lciIsInBvcHVwSW1nIiwicG9wdXBUeHQiLCJjb25maWciLCJiYXNlVXJsIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJoYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJoYW5kbGVFcnJvciIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJjbG9zZVBvcHVwIiwicG9wdXAiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VQb3B1cEVzYyIsIm9wZW5Qb3B1cCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInVzZXJJZCIsImRlbGV0ZWRTZXJ2ZXJDYXJkIiwiY3JlYXRlQ2FyZCIsImNhcmQiLCJjYXJkTmV3IiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmRJbWFnZSIsImNhcmREZWxldGVCdXR0b24iLCJjYXJkTGlrZUJ1dHRvbiIsImxpa2VDb3VudGVyIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJpZCIsIl9pZCIsInRleHRDb250ZW50IiwibGlrZXMiLCJsZW5ndGgiLCJjb250YWlucyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsImNhdGNoIiwiZGVsZXRlTGlrZSIsImFkZExpa2UiLCJpIiwidGFyZ2V0IiwiY2xvc2VzdCIsIm93bmVyIiwiaGlkZUlucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJzZWxlY3RvcnMiLCJmb3JtRXJyb3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicmV2YWxpZGF0ZUZvcm0iLCJmb3JtRWxlbWVudCIsImlucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsImlucHV0U2VsZWN0b3IiLCJidXR0b25TdWJtaXQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJpbmFjdGl2ZVN1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJhY3RpdmVTdWJtaXRCdXR0b24iLCJyZW5kZXJMb2FkaW5nIiwibG9hZGluZyIsImJ1dHRvbiIsImJ1dHRvblRleHQiLCJtZXN0b1NlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsInJlc2V0IiwidmFsdWUiLCJhdmF0YXIiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdHRlciIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXNlckRhdGEiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImZpbmFsbHkiLCJhYm91dCIsImNhcmRzIiwicHJlcGVuZCIsImVycm9yTWVzc2FnZSIsInNob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzZXRFdmVudExpc3RlbmVycyIsImFsbCIsImFwcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=