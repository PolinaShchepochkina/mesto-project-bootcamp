(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{k:()=>J,x:()=>t});var t,n=document.querySelectorAll(".popup"),r=document.querySelector("#popupAvatar"),o=document.querySelector("#popupEdit"),c=document.querySelector("#popupAdd"),a=document.querySelector("#popupImage"),u=document.querySelector("#popupDelete"),i=document.querySelector(".profile__image"),l=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__add-button"),d=document.querySelector("#avatar"),f=document.querySelector("#edit"),m=document.querySelector("#add"),p=document.querySelector("#delete"),v=document.querySelector("#url-avatar"),y=document.querySelector(".profile__title"),h=document.querySelector(".profile__text"),_=document.querySelector("#person-input"),S=document.querySelector("#about-input"),b=document.querySelector("#place-input"),q=document.querySelector("#url-input"),g=document.querySelector(".cards"),k=a.querySelector(".popup__image"),E=a.querySelector(".popup__text"),L={baseUrl:"https://nomoreparties.co/v1/wbc-cohort-1",headers:{authorization:"61650a97-0198-4977-9b18-131273aaff2f","Content-Type":"application/json"}};function C(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}function x(e){console.log(e)}function A(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",w)}function U(e){e.classList.add("popup_opened"),document.addEventListener("keydown",w)}function w(e){"Escape"===e.key&&A(document.querySelector(".popup_opened"))}function O(e){var n=document.querySelector("#card-template").content.querySelector(".card__item").cloneNode(!0),r=n.querySelector(".card__image"),o=n.querySelector(".card__delete-button"),c=n.querySelector(".card__like-button"),i=n.querySelector(".card__like-counter");r.src=e.link,r.alt=e.name,n.id=e._id,n.querySelector(".card__title").textContent=e.name,n.querySelector(".card__like-counter").textContent=e.likes.length,c.addEventListener("click",(function(){c.classList.contains("card__like-button_active")?function(e,t,n){return(r=e.id,fetch("".concat(L.baseUrl,"/cards/likes/").concat(r),{method:"DELETE",headers:L.headers}).then(C)).then((function(e){t.classList.remove("card__like-button_active"),n.textContent=e.likes.length})).catch(x);var r}(n,c,i):function(e,t,n){return(r=e.id,fetch("".concat(L.baseUrl,"/cards/likes/").concat(r),{method:"PUT",headers:L.headers}).then(C)).then((function(e){t.classList.add("card__like-button_active"),n.textContent=e.likes.length})).catch(x);var r}(n,c,i)}));for(var l=0;l<e.likes.length;l++)e.likes[l]._id===t&&c.classList.add("card__like-button_active");return o.addEventListener("click",(function(e){J=e.target.closest(".card__item"),U(u)})),e.owner._id!==t&&o.remove(),r.addEventListener("click",(function(){k.src=e.link,k.alt=e.name,E.textContent=e.name,U(a)})),n}function j(e,t){var n=document.querySelector(".".concat(e.id,"-error"));e.classList.remove(t.inputErrorClass),n.classList.remove(t.errorClass),n.textContent=""}function P(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(e){j(e,t)})),T(r,t)}function T(e,t){var n=t.inactiveButtonClass;e.classList.add(n),e.disabled=!0}function D(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?function(e,t){var n=t.inactiveButtonClass;e.classList.remove(n),e.disabled=!1}(t,n):T(t,n)}function B(e,t){t.querySelector(".form__submit-button").textContent=e?"Сохранение...":"Сохранить"}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N,J=null,H={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type-error",errorClass:"form__input-error_active"};i.addEventListener("click",(function(){d.reset(),P(d,H),U(r)})),l.addEventListener("click",(function(){_.value=y.textContent,S.value=h.textContent,P(f,H),U(o)})),s.addEventListener("click",(function(){m.reset(),P(m,H),U(c)})),d.addEventListener("submit",(function(e){var t;e.preventDefault(),B(!0,r),(t=v.value,fetch("".concat(L.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:L.headers,body:JSON.stringify({avatar:t})}).then(C)).then((function(e){i.style.backgroundImage="url(".concat(e.avatar,")")})).then(A(r)).finally((function(){B(!1,r)}))})),f.addEventListener("submit",(function(e){var t,n;e.preventDefault(),B(!0,o),(t=_.value,n=S.value,fetch("".concat(L.baseUrl,"/users/me"),{method:"PATCH",headers:L.headers,body:JSON.stringify({name:t,about:n})}).then(C)).then((function(e){y.textContent=e.name,h.textContent=e.about})).then(A(o)).finally((function(){B(!1,o)}))})),m.addEventListener("submit",(function(e){var t,n;e.preventDefault(),B(!0,c),(t=b.value,n=q.value,fetch("".concat(L.baseUrl,"/cards"),{method:"POST",headers:L.headers,body:JSON.stringify({name:t,link:n})}).then(C)).then((function(e){g.prepend(O(e))})).then(A(c)).finally((function(){B(!1,c)}))})),p.addEventListener("submit",(function(e){return e.preventDefault(),(t=J.id,fetch("".concat(L.baseUrl,"/cards/").concat(t),{method:"DELETE",headers:L.headers}).then(C)).then((function(){J.remove(),A(u),J=null})).catch(x);var t})),n.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&A(e),t.target.classList.contains("popup__close-button")&&A(e)}))})),N=H,Array.from(document.querySelectorAll(N.formSelector)).forEach((function(e){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);D(n,r,t),n.forEach((function(e){e.addEventListener("input",(function(){(function(e,t){e.validity.valid?j(e,t):function(e,t,n){var r=document.querySelector(".".concat(e.id,"-error"));e.classList.add(n.inputErrorClass),r.classList.add(n.errorClass),r.textContent=t}(e,e.validationMessage,t)})(e,t),D(n,r,t)}))}))}(e,N)})),Promise.all([fetch("".concat(L.baseUrl,"/users/me"),{headers:L.headers}).then(C),fetch("".concat(L.baseUrl,"/cards"),{headers:L.headers}).then(C)]).then((function(e){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],o=n[1];t=r._id,y.textContent=r.name,h.textContent=r.about,i.style.backgroundImage="url(".concat(r.avatar,")"),console.log(r);for(var c=0;c<o.length;c++)g.append(O(o[c]));console.log(o)})).catch(x)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U0FBVSxHQUFtQixNLGsxQkFBQSxNQUFsQjRDLEVBQWtCLEtBQVJLLEVBQVEsS0FDakMxSCxFQUFTcUgsRUFBU25ELElBQ2xCaEQsRUFBU2lELFlBQWNrRCxFQUFTckQsS0FDaEM3QyxFQUFVZ0QsWUFBY2tELEVBQVNJLE1BQ2pDL0csRUFBYzRHLE1BQU1DLGdCQUFwQixjQUE2Q0YsRUFBU0wsT0FBdEQsS0FDQXhFLFFBQVFDLElBQUk0RSxHQUVaLElBQUssSUFBSXhDLEVBQUksRUFBR0EsRUFBSTZDLEVBQU1yRCxPQUFRUSxJQUNoQ3JELEVBQWUwRyxPQUFPOUUsRUFBV3NFLEVBQU03QyxLQUV6Q3JDLFFBQVFDLElBQUlpRixFQUNiLElBQ0FoRCxNQUFNcEMsRSIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy92YXJpYWJsZXMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9hcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL21vZGFsLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy92YWxpZGF0ZS5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCJleHBvcnQgY29uc3QgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJyk7XG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBBdmF0YXInKTtcbmV4cG9ydCBjb25zdCBwb3B1cEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBFZGl0Jyk7XG5leHBvcnQgY29uc3QgcG9wdXBBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBBZGQnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwSW1hZ2UnKTtcbmV4cG9ydCBjb25zdCBwb3B1cERlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cERlbGV0ZScpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UnKTtcbmV4cG9ydCBjb25zdCBidXR0b25PcGVuRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGZvcm1BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYXZhdGFyJyk7XG5leHBvcnQgY29uc3QgZm9ybUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWRpdCcpO1xuZXhwb3J0IGNvbnN0IGZvcm1BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWRkJyk7XG5leHBvcnQgY29uc3QgZm9ybURlbGV0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkZWxldGUnKTtcbmV4cG9ydCBjb25zdCBpbnB1dEF2YXRhclVybCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1cmwtYXZhdGFyJyk7XG5leHBvcnQgY29uc3QgdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTtcbmV4cG9ydCBjb25zdCB1c2VyQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGV4dCcpO1xuZXhwb3J0IGNvbnN0IGlucHV0VXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcGVyc29uLWlucHV0Jyk7XG5leHBvcnQgY29uc3QgaW5wdXRVc2VyQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYWJvdXQtaW5wdXQnKTtcbmV4cG9ydCBjb25zdCBpbnB1dFBsYWNlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGFjZS1pbnB1dCcpO1xuZXhwb3J0IGNvbnN0IGlucHV0UGxhY2VVcmwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXJsLWlucHV0Jyk7XG5leHBvcnQgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHMnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEltZyA9IHBvcHVwSW1hZ2UucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwVHh0ID0gcG9wdXBJbWFnZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RleHQnKTsiLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XG5cbmltcG9ydCB7XG4gIHBvcHVwcywgcG9wdXBBdmF0YXIsIHBvcHVwRWRpdCwgcG9wdXBBZGQsXG4gIHByb2ZpbGVBdmF0YXIsIGJ1dHRvbk9wZW5FZGl0LCBidXR0b25PcGVuQWRkLFxuICBmb3JtQXZhdGFyLCBmb3JtRWRpdCwgZm9ybUFkZCxcbiAgdXNlck5hbWUsIHVzZXJBYm91dCwgaW5wdXRVc2VyTmFtZSwgaW5wdXRVc2VyQWJvdXQsXG4gIGlucHV0QXZhdGFyVXJsLCBpbnB1dFBsYWNlTmFtZSwgaW5wdXRQbGFjZVVybCxcbiAgY2FyZHNDb250YWluZXIsXG4gIGZvcm1EZWxldGVcbn0gZnJvbSAnLi92YXJpYWJsZXMuanMnO1xuaW1wb3J0IHsgY3JlYXRlQ2FyZCwgZGVsZXRlQ2FyZCB9IGZyb20gJy4vY2FyZC5qcyc7XG5pbXBvcnQgeyByZXZhbGlkYXRlRm9ybSwgZW5hYmxlVmFsaWRhdGlvbiB9IGZyb20gJy4vdmFsaWRhdGUuanMnO1xuaW1wb3J0IHsgY2xvc2VQb3B1cCwgb3BlblBvcHVwIH0gZnJvbSAnLi9tb2RhbC5qcyc7XG5pbXBvcnQge1xuICBnZXRTZXJ2ZXJVc2VyRGF0YSwgZ2V0U2VydmVySW5pdGlhbENhcmRzLFxuICBwYXRjaFVzZXJBdmF0YXIsIHBhdGNoVXNlckRhdGEsIHBvc3ROZXdDYXJkLFxuICBoYW5kbGVFcnJvclxufSBmcm9tICcuL2FwaS5qcyc7XG5pbXBvcnQgeyByZW5kZXJMb2FkaW5nIH0gZnJvbSAnLi91dGlscy5qcydcblxuZXhwb3J0IGxldCB1c2VySWQ7XG5leHBvcnQgbGV0IGRlbGV0ZWRTZXJ2ZXJDYXJkID0gbnVsbDtcblxuY29uc3QgbWVzdG9TZWxlY3RvcnMgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5mb3JtJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX3N1Ym1pdC1idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAnZm9ybV9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZScsXG4gIGlucHV0RXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0X3R5cGUtZXJyb3InLFxuICBlcnJvckNsYXNzOiAnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJyxcbn1cblxucHJvZmlsZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qb3B1cEF2YXRhcik7XG5idXR0b25PcGVuRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qb3B1cEVkaXQpO1xuYnV0dG9uT3BlbkFkZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qb3B1cEFkZCk7XG5mb3JtQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm1BdmF0YXIpO1xuZm9ybUVkaXQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybUVkaXQpO1xuZm9ybUFkZC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXRGb3JtQWRkKTtcbmZvcm1EZWxldGUuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZGVsZXRlQ2FyZCk7XG5cbnBvcHVwcy5mb3JFYWNoKChwb3B1cCkgPT4ge1xuICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcbiAgICAgIGNsb3NlUG9wdXAocG9wdXApXG4gICAgfVxuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcbiAgICAgIGNsb3NlUG9wdXAocG9wdXApXG4gICAgfVxuICB9KVxufSlcblxuZnVuY3Rpb24gc3VibWl0Rm9ybUF2YXRhcihldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICByZW5kZXJMb2FkaW5nKHRydWUsIHBvcHVwQXZhdGFyKTtcbiAgcGF0Y2hVc2VyQXZhdGFyKGlucHV0QXZhdGFyVXJsLnZhbHVlKVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dXNlckRhdGEuYXZhdGFyfSlgO1xuICAgIH0pXG4gICAgLnRoZW4oY2xvc2VQb3B1cChwb3B1cEF2YXRhcikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcG9wdXBBdmF0YXIpXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gc3VibWl0Rm9ybUVkaXQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBwb3B1cEVkaXQpXG4gIHBhdGNoVXNlckRhdGEoaW5wdXRVc2VyTmFtZS52YWx1ZSwgaW5wdXRVc2VyQWJvdXQudmFsdWUpXG4gICAgLnRoZW4oKHVzZXJEYXRhKSA9PiB7XG4gICAgICB1c2VyTmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgICB1c2VyQWJvdXQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcbiAgICB9KVxuICAgIC50aGVuKGNsb3NlUG9wdXAocG9wdXBFZGl0KSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICByZW5kZXJMb2FkaW5nKGZhbHNlLCBwb3B1cEVkaXQpXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gc3VibWl0Rm9ybUFkZChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICByZW5kZXJMb2FkaW5nKHRydWUsIHBvcHVwQWRkKVxuICBwb3N0TmV3Q2FyZChpbnB1dFBsYWNlTmFtZS52YWx1ZSwgaW5wdXRQbGFjZVVybC52YWx1ZSlcbiAgICAudGhlbigoY2FyZHMpID0+IHtcbiAgICAgIGNhcmRzQ29udGFpbmVyLnByZXBlbmQoY3JlYXRlQ2FyZChjYXJkcykpO1xuICAgIH0pXG4gICAgLnRoZW4oY2xvc2VQb3B1cChwb3B1cEFkZCkpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgcG9wdXBBZGQpXG4gICAgfSlcbn1cblxuZnVuY3Rpb24gb3BlblBvcHVwQXZhdGFyKCkge1xuICBmb3JtQXZhdGFyLnJlc2V0KCk7XG4gIHJldmFsaWRhdGVGb3JtKGZvcm1BdmF0YXIsIG1lc3RvU2VsZWN0b3JzKTtcbiAgb3BlblBvcHVwKHBvcHVwQXZhdGFyKTtcbn1cblxuZnVuY3Rpb24gb3BlblBvcHVwRWRpdCgpIHtcbiAgaW5wdXRVc2VyTmFtZS52YWx1ZSA9IHVzZXJOYW1lLnRleHRDb250ZW50O1xuICBpbnB1dFVzZXJBYm91dC52YWx1ZSA9IHVzZXJBYm91dC50ZXh0Q29udGVudDtcbiAgcmV2YWxpZGF0ZUZvcm0oZm9ybUVkaXQsIG1lc3RvU2VsZWN0b3JzKTtcbiAgb3BlblBvcHVwKHBvcHVwRWRpdCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Qb3B1cEFkZCgpIHtcbiAgZm9ybUFkZC5yZXNldCgpO1xuICByZXZhbGlkYXRlRm9ybShmb3JtQWRkLCBtZXN0b1NlbGVjdG9ycyk7XG4gIG9wZW5Qb3B1cChwb3B1cEFkZCk7XG59XG5cbmVuYWJsZVZhbGlkYXRpb24obWVzdG9TZWxlY3RvcnMpO1xuXG5Qcm9taXNlLmFsbChbZ2V0U2VydmVyVXNlckRhdGEoKSwgZ2V0U2VydmVySW5pdGlhbENhcmRzKCldKVxuICAudGhlbihmdW5jdGlvbiAoW3VzZXJEYXRhLCBjYXJkc10pIHtcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgIHVzZXJBYm91dC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xuICAgIHByb2ZpbGVBdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3VzZXJEYXRhLmF2YXRhcn0pYDtcbiAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSlcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNhcmRzQ29udGFpbmVyLmFwcGVuZChjcmVhdGVDYXJkKGNhcmRzW2ldKSlcbiAgICB9XG4gICAgY29uc29sZS5sb2coY2FyZHMpXG4gIH0pXG4gIC5jYXRjaChoYW5kbGVFcnJvcikiLCIvLy9Db25maWcvLy9cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGJhc2VVcmw6IGBodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvd2JjLWNvaG9ydC0xYCxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc2MTY1MGE5Ny0wMTk4LTQ5NzctOWIxOC0xMzEyNzNhYWZmMmYnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufVxuXG4vLy/QpNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INC+0YLQstC10YLQsC8vL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlcykge1xuICBpZiAocmVzLm9rKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbn1cblxuLy8v0J7RiNC40LHQutC4LCDQutC+0YLQvtGA0YvQtSDQv9C+0L/QsNC00LDRjtGCINCyIC5jYXRjaC8vL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycikge1xuICBjb25zb2xlLmxvZyhlcnIpO1xufVxuXG4vL9CX0LDQs9GA0YPQt9C60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INGBINGB0LXRgNCy0LXRgNCwLy8vL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZlclVzZXJEYXRhKCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLy8v0JfQsNCz0YDRg9C30LrQsCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwLy8vL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZlckluaXRpYWxDYXJkcygpIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9Ce0LHQvdC+0LLQu9C10L3QuNC1INCw0LLQsNGC0LDRgNCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjy8vLy9cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KVxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLy8v0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRjy8vLy9cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaFVzZXJEYXRhKG5hbWUsIGFib3V0KSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSlcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9CU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuC8vLy9cbmV4cG9ydCBmdW5jdGlvbiBwb3N0TmV3Q2FyZChuYW1lLCBsaW5rKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pXG4gIH0pXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXG59XG5cbi8vLy/Qo9C00LDQu9C10L3QuNC1INGC0L7Qu9GM0LrQviDRgdCy0L7QtdC5INC60LDRgNGC0L7Rh9C60LgvLy8vXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlU2VydmVyQ2FyZChpZCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnNcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9CU0L7QsdCw0LLQu9C10L3QuNC1INC70LDQudC60LAvLy8vXG5leHBvcnQgZnVuY3Rpb24gbGlrZUNhcmQoaWQpIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6ICdQVVQnLFxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLy8v0KPQtNCw0LvQtdC90LjQtSDQu9Cw0LnQutCwLy8vL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2xpa2VDYXJkKGlkKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn0iLCJleHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cChwb3B1cCkge1xuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlUG9wdXBFc2MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwKSB7XG4gIHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VQb3B1cEVzYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZVBvcHVwT3ZlcmxheShldmVudCkge1xuICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgY2xvc2VQb3B1cChldmVudC5jdXJyZW50VGFyZ2V0KTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cEVzYyhldmVudCkge1xuICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW5lZCcpO1xuICAgIGNsb3NlUG9wdXAocG9wdXApO1xuICB9XG59IiwiaW1wb3J0IHsgaGFuZGxlRXJyb3IsIGxpa2VDYXJkLCBkaXNsaWtlQ2FyZCwgZGVsZXRlU2VydmVyQ2FyZCB9IGZyb20gXCIuL2FwaS5qc1wiO1xuaW1wb3J0IHsgY2xvc2VQb3B1cCwgb3BlblBvcHVwIH0gZnJvbSAnLi9tb2RhbC5qcyc7XG5pbXBvcnQgeyBwb3B1cERlbGV0ZSwgcG9wdXBJbWFnZSwgcG9wdXBJbWcsIHBvcHVwVHh0IH0gZnJvbSAnLi92YXJpYWJsZXMuanMnO1xuaW1wb3J0IHsgdXNlcklkLCBkZWxldGVkU2VydmVyQ2FyZCB9IGZyb20gJy4vaW5kZXguanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmQpIHtcbiAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcmQtdGVtcGxhdGUnKS5jb250ZW50O1xuICBjb25zdCBjYXJkTmV3ID0gY2FyZFRlbXBsYXRlLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pdGVtJykuY2xvbmVOb2RlKHRydWUpO1xuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkTmV3LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xuICBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlLWJ1dHRvbicpO1xuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmROZXcucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UtYnV0dG9uJyk7XG4gIGNvbnN0IGxpa2VDb3VudGVyID0gY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJyk7XG4gIGNhcmRJbWFnZS5zcmMgPSBjYXJkLmxpbms7XG4gIGNhcmRJbWFnZS5hbHQgPSBjYXJkLm5hbWU7XG4gIGNhcmROZXcuaWQgPSBjYXJkLl9pZDtcbiAgY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IGNhcmQubmFtZTtcbiAgY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudGVyJykudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aDtcbiAgLy8vL0xpa2UvLy8vXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpKSB7XG4gICAgICBkZWxldGVMaWtlKGNhcmROZXcsIGNhcmRMaWtlQnV0dG9uLCBsaWtlQ291bnRlcilcbiAgICB9IGVsc2Uge1xuICAgICAgYWRkTGlrZShjYXJkTmV3LCBjYXJkTGlrZUJ1dHRvbiwgbGlrZUNvdW50ZXIpXG4gICAgfVxuICB9KVxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcmQubGlrZXMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoY2FyZC5saWtlc1tpXS5faWQgPT09IHVzZXJJZCkge1xuICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZCgnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJyk7XG4gICAgfVxuICB9XG4gIC8vLy9EZWxldGUvLy8vXG4gIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICBkZWxldGVkU2VydmVyQ2FyZCA9IGV2ZW50LnRhcmdldC5jbG9zZXN0KCcuY2FyZF9faXRlbScpXG4gICAgb3BlblBvcHVwKHBvcHVwRGVsZXRlKTtcbiAgfSlcbiAgaWYgKGNhcmQub3duZXIuX2lkICE9PSB1c2VySWQpIHtcbiAgICBjYXJkRGVsZXRlQnV0dG9uLnJlbW92ZSgpXG4gIH1cbiAgLy8vL0Z1bGwgSW1hZ2UvLy8vXG4gIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICBwb3B1cEltZy5zcmMgPSBjYXJkLmxpbms7XG4gICAgcG9wdXBJbWcuYWx0ID0gY2FyZC5uYW1lO1xuICAgIHBvcHVwVHh0LnRleHRDb250ZW50ID0gY2FyZC5uYW1lO1xuICAgIG9wZW5Qb3B1cChwb3B1cEltYWdlKTtcbiAgfSk7XG4gIC8vLy9OZXcgY2FyZC8vLy9cbiAgcmV0dXJuIGNhcmROZXc7XG59XG5cbi8vLy9EZWxldGUvLy8vXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ2FyZChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICByZXR1cm4gZGVsZXRlU2VydmVyQ2FyZChkZWxldGVkU2VydmVyQ2FyZC5pZClcbiAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICBkZWxldGVkU2VydmVyQ2FyZC5yZW1vdmUoKTtcbiAgICAgIGNsb3NlUG9wdXAocG9wdXBEZWxldGUpO1xuICAgICAgZGVsZXRlZFNlcnZlckNhcmQgPSBudWxsO1xuICAgIH0pXG4gICAgLmNhdGNoKGhhbmRsZUVycm9yKVxufVxuXG4vLy8vTGlrZS8vLy9cbmZ1bmN0aW9uIGFkZExpa2UoY2FyZE5ldywgY2FyZExpa2VCdXR0b24sIGxpa2VDb3VudGVyKSB7XG4gIHJldHVybiBsaWtlQ2FyZChjYXJkTmV3LmlkKVxuICAgIC50aGVuKGZ1bmN0aW9uIChjYXJkKSB7XG4gICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUxpa2UoY2FyZE5ldywgY2FyZExpa2VCdXR0b24sIGxpa2VDb3VudGVyKSB7XG4gIHJldHVybiBkaXNsaWtlQ2FyZChjYXJkTmV3LmlkKVxuICAgIC50aGVuKGZ1bmN0aW9uIChjYXJkKSB7XG4gICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICAgIGxpa2VDb3VudGVyLnRleHRDb250ZW50ID0gY2FyZC5saWtlcy5sZW5ndGg7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG59IiwiZXhwb3J0IGZ1bmN0aW9uIHNob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlLCBzZWxlY3RvcnMpIHtcbiAgY29uc3QgZm9ybUVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzKTtcbiAgZm9ybUVycm9yLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzLmVycm9yQ2xhc3MpO1xuICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIHNlbGVjdG9ycykge1xuICBjb25zdCBmb3JtRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3MpO1xuICBmb3JtRXJyb3IuY2xhc3NMaXN0LnJlbW92ZShzZWxlY3RvcnMuZXJyb3JDbGFzcyk7XG4gIGZvcm1FcnJvci50ZXh0Q29udGVudCA9ICcnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKSB7XG4gIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsIHNlbGVjdG9ycyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZShmdW5jdGlvbiAoaW5wdXRFbGVtZW50KSB7XG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXZhbGlkYXRlRm9ybShmb3JtRWxlbWVudCwgc2VsZWN0b3JzKSB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25TdWJtaXQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIGlucHV0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQpIHtcbiAgICBoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIHNlbGVjdG9ycyk7XG4gIH0pXG4gIGluYWN0aXZlU3VibWl0QnV0dG9uKGJ1dHRvblN1Ym1pdCwgc2VsZWN0b3JzKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluYWN0aXZlU3VibWl0QnV0dG9uKGJ1dHRvblN1Ym1pdCwgeyBpbmFjdGl2ZUJ1dHRvbkNsYXNzIH0pIHtcbiAgYnV0dG9uU3VibWl0LmNsYXNzTGlzdC5hZGQoaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIGJ1dHRvblN1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhY3RpdmVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0LCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSkge1xuICBidXR0b25TdWJtaXQuY2xhc3NMaXN0LnJlbW92ZShpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgYnV0dG9uU3VibWl0LmRpc2FibGVkID0gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvblN1Ym1pdCwgc2VsZWN0b3JzKSB7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIGluYWN0aXZlU3VibWl0QnV0dG9uKGJ1dHRvblN1Ym1pdCwgc2VsZWN0b3JzKTtcbiAgfSBlbHNlIHtcbiAgICBhY3RpdmVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgc2VsZWN0b3JzKSB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25TdWJtaXQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpO1xuICBpbnB1dExpc3QuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXRFbGVtZW50KSB7XG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKCkge1xuICAgICAgY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKTtcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpO1xuICAgIH0pXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlbmFibGVWYWxpZGF0aW9uKHNlbGVjdG9ycykge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goZnVuY3Rpb24gKGZvcm1FbGVtZW50KSB7XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIHNlbGVjdG9ycyk7XG4gIH0pXG59IiwiZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckxvYWRpbmcobG9hZGluZywgcG9wdXApIHtcbiAgY29uc3QgcG9wdXBTYXZlID0gcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm1fX3N1Ym1pdC1idXR0b24nKVxuICBpZiAobG9hZGluZykge1xuICAgIHBvcHVwU2F2ZS50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLidcbiAgfSBlbHNlIHtcbiAgICBwb3B1cFNhdmUudGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJ1xuICB9XG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwidXNlcklkIiwicG9wdXBzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicG9wdXBBdmF0YXIiLCJxdWVyeVNlbGVjdG9yIiwicG9wdXBFZGl0IiwicG9wdXBBZGQiLCJwb3B1cEltYWdlIiwicG9wdXBEZWxldGUiLCJwcm9maWxlQXZhdGFyIiwiYnV0dG9uT3BlbkVkaXQiLCJidXR0b25PcGVuQWRkIiwiZm9ybUF2YXRhciIsImZvcm1FZGl0IiwiZm9ybUFkZCIsImZvcm1EZWxldGUiLCJpbnB1dEF2YXRhclVybCIsInVzZXJOYW1lIiwidXNlckFib3V0IiwiaW5wdXRVc2VyTmFtZSIsImlucHV0VXNlckFib3V0IiwiaW5wdXRQbGFjZU5hbWUiLCJpbnB1dFBsYWNlVXJsIiwiY2FyZHNDb250YWluZXIiLCJwb3B1cEltZyIsInBvcHVwVHh0IiwiY29uZmlnIiwiYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiaGFuZGxlUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiaGFuZGxlRXJyb3IiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY2xvc2VQb3B1cCIsInBvcHVwIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNsb3NlUG9wdXBFc2MiLCJvcGVuUG9wdXAiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJjcmVhdGVDYXJkIiwiY2FyZCIsImNhcmROZXciLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZEltYWdlIiwiY2FyZERlbGV0ZUJ1dHRvbiIsImNhcmRMaWtlQnV0dG9uIiwibGlrZUNvdW50ZXIiLCJzcmMiLCJsaW5rIiwiYWx0IiwibmFtZSIsImlkIiwiX2lkIiwidGV4dENvbnRlbnQiLCJsaWtlcyIsImxlbmd0aCIsImNvbnRhaW5zIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiY2F0Y2giLCJkZWxldGVMaWtlIiwiYWRkTGlrZSIsImkiLCJkZWxldGVkU2VydmVyQ2FyZCIsInRhcmdldCIsImNsb3Nlc3QiLCJvd25lciIsImhpZGVJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50Iiwic2VsZWN0b3JzIiwiZm9ybUVycm9yIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInJldmFsaWRhdGVGb3JtIiwiZm9ybUVsZW1lbnQiLCJpbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJpbnB1dFNlbGVjdG9yIiwiYnV0dG9uU3VibWl0Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJmb3JFYWNoIiwiaW5hY3RpdmVTdWJtaXRCdXR0b24iLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiYWN0aXZlU3VibWl0QnV0dG9uIiwicmVuZGVyTG9hZGluZyIsImxvYWRpbmciLCJtZXN0b1NlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsInJlc2V0IiwidmFsdWUiLCJhdmF0YXIiLCJwcmV2ZW50RGVmYXVsdCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXNlckRhdGEiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImZpbmFsbHkiLCJhYm91dCIsImNhcmRzIiwicHJlcGVuZCIsImVycm9yTWVzc2FnZSIsInNob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzZXRFdmVudExpc3RlbmVycyIsImFsbCIsImFwcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=