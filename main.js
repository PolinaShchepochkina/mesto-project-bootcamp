(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{k:()=>J,x:()=>t});var t,n=document.querySelectorAll(".popup"),r=document.querySelector("#popupAvatar"),o=document.querySelector("#popupEdit"),c=document.querySelector("#popupAdd"),a=document.querySelector("#popupImage"),u=document.querySelector("#popupDelete"),i=document.querySelector(".profile__image"),l=document.querySelector(".profile__edit-button"),s=document.querySelector(".profile__add-button"),d=document.querySelector("#avatar"),f=document.querySelector("#edit"),m=document.querySelector("#add"),p=document.querySelector("#delete"),v=document.querySelector("#url-avatar"),y=document.querySelector(".profile__title"),h=document.querySelector(".profile__text"),_=document.querySelector("#person-input"),b=document.querySelector("#about-input"),S=document.querySelector("#place-input"),q=document.querySelector("#url-input"),g=document.querySelector(".cards"),E=a.querySelector(".popup__image"),L=a.querySelector(".popup__text"),k={baseUrl:"https://nomoreparties.co/v1/wbc-cohort-1",headers:{authorization:"61650a97-0198-4977-9b18-131273aaff2f","Content-Type":"application/json"}};function C(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}function x(e){console.log(e)}function A(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",w)}function U(e){e.classList.add("popup_opened"),document.addEventListener("keydown",w)}function w(e){"Escape"===e.key&&A(document.querySelector(".popup_opened"))}function O(e){var n=document.querySelector("#card-template").content.querySelector(".card__item").cloneNode(!0),r=n.querySelector(".card__image"),o=n.querySelector(".card__delete-button"),c=n.querySelector(".card__like-button"),i=n.querySelector(".card__like-counter");r.src=e.link,r.alt=e.name,n.id=e._id,n.querySelector(".card__title").textContent=e.name,i.textContent=e.likes.length,c.addEventListener("click",(function(){c.classList.contains("card__like-button_active")?function(e,t,n){return(r=e.id,fetch("".concat(k.baseUrl,"/cards/likes/").concat(r),{method:"DELETE",headers:k.headers}).then(C)).then((function(e){t.classList.remove("card__like-button_active"),n.textContent=e.likes.length})).catch(x);var r}(n,c,i):function(e,t,n){return(r=e.id,fetch("".concat(k.baseUrl,"/cards/likes/").concat(r),{method:"PUT",headers:k.headers}).then(C)).then((function(e){t.classList.add("card__like-button_active"),n.textContent=e.likes.length})).catch(x);var r}(n,c,i)}));for(var l=0;l<e.likes.length;l++)e.likes[l]._id===t&&c.classList.add("card__like-button_active");return o.addEventListener("click",(function(e){J=e.target.closest(".card__item"),U(u)})),e.owner._id!==t&&o.remove(),r.addEventListener("click",(function(){E.src=e.link,E.alt=e.name,L.textContent=e.name,U(a)})),n}function j(e,t){var n=document.querySelector(".".concat(e.id,"-error"));e.classList.remove(t.inputErrorClass),n.classList.remove(t.errorClass),n.textContent=""}function P(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);n.forEach((function(e){j(e,t)})),T(r,t)}function T(e,t){var n=t.inactiveButtonClass;e.classList.add(n),e.disabled=!0}function D(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?function(e,t){var n=t.inactiveButtonClass;e.classList.remove(n),e.disabled=!1}(t,n):T(t,n)}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Сохранить";t.textContent=e?"Сохранение...":n}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N,J=null,H={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit-button",inactiveButtonClass:"form__submit-button_inactive",inputErrorClass:"form__input_type-error",errorClass:"form__input-error_active"};i.addEventListener("click",(function(){d.reset(),P(d,H),U(r)})),l.addEventListener("click",(function(){_.value=y.textContent,b.value=h.textContent,P(f,H),U(o)})),s.addEventListener("click",(function(){m.reset(),P(m,H),U(c)})),d.addEventListener("submit",(function(e){var t;e.preventDefault(),B(!0,e.submitter),(t=v.value,fetch("".concat(k.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:k.headers,body:JSON.stringify({avatar:t})}).then(C)).then((function(e){i.style.backgroundImage="url(".concat(e.avatar,")")})).then((function(){return A(r)})).finally((function(){B(!1,e.submitter)}))})),f.addEventListener("submit",(function(e){var t,n;e.preventDefault(),B(!0,e.submitter),(t=_.value,n=b.value,fetch("".concat(k.baseUrl,"/users/me"),{method:"PATCH",headers:k.headers,body:JSON.stringify({name:t,about:n})}).then(C)).then((function(e){y.textContent=e.name,h.textContent=e.about})).then((function(){return A(o)})).finally((function(){B(!1,e.submitter)}))})),m.addEventListener("submit",(function(e){var t,n;e.preventDefault(),B(!0,e.submitter),(t=S.value,n=q.value,fetch("".concat(k.baseUrl,"/cards"),{method:"POST",headers:k.headers,body:JSON.stringify({name:t,link:n})}).then(C)).then((function(e){g.prepend(O(e))})).then((function(){return A(c)})).finally((function(){B(!1,e.submitter)}))})),p.addEventListener("submit",(function(e){return e.preventDefault(),(t=J.id,fetch("".concat(k.baseUrl,"/cards/").concat(t),{method:"DELETE",headers:k.headers}).then(C)).then((function(){J.remove(),A(u),J=null})).catch(x);var t})),n.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&A(e),t.target.classList.contains("popup__close-button")&&A(e)}))})),N=H,Array.from(document.querySelectorAll(N.formSelector)).forEach((function(e){!function(e,t){var n=Array.from(e.querySelectorAll(t.inputSelector)),r=e.querySelector(t.submitButtonSelector);D(n,r,t),n.forEach((function(e){e.addEventListener("input",(function(){(function(e,t){e.validity.valid?j(e,t):function(e,t,n){var r=document.querySelector(".".concat(e.id,"-error"));e.classList.add(n.inputErrorClass),r.classList.add(n.errorClass),r.textContent=t}(e,e.validationMessage,t)})(e,t),D(n,r,t)}))}))}(e,N)})),Promise.all([fetch("".concat(k.baseUrl,"/users/me"),{headers:k.headers}).then(C),fetch("".concat(k.baseUrl,"/cards"),{headers:k.headers}).then(C)]).then((function(e){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],o=n[1];t=r._id,y.textContent=r.name,h.textContent=r.about,i.style.backgroundImage="url(".concat(r.avatar,")"),console.log(r);for(var c=0;c<o.length;c++)g.append(O(o[c]));console.log(o)})).catch(x)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUk1QyxFQUFPQyxRQUFYLFVBQTRCLENBQ3RDQyxRQUFTRixFQUFPRSxVQUVmNEMsS0FBSzFDLEtEd0VQMEMsTUFBSyxTQUFVLEdBQW1CLE0sazFCQUFBLE1BQWxCK0MsRUFBa0IsS0FBUkssRUFBUSxLQUNqQzdILEVBQVN3SCxFQUFTdEQsSUFDbEJoRCxFQUFTaUQsWUFBY3FELEVBQVN4RCxLQUNoQzdDLEVBQVVnRCxZQUFjcUQsRUFBU0ksTUFDakNsSCxFQUFjK0csTUFBTUMsZ0JBQXBCLGNBQTZDRixFQUFTTixPQUF0RCxLQUNBMUUsUUFBUUMsSUFBSStFLEdBRVosSUFBSyxJQUFJM0MsRUFBSSxFQUFHQSxFQUFJZ0QsRUFBTXhELE9BQVFRLElBQ2hDckQsRUFBZTZHLE9BQU9qRixFQUFXeUUsRUFBTWhELEtBRXpDckMsUUFBUUMsSUFBSW9GLEVBQ2IsSUFDQW5ELE1BQU1wQyxFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL3ZhcmlhYmxlcy5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL2FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL2NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL3ZhbGlkYXRlLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy91dGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBjb25zdCBwb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cEF2YXRhcicpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cEVkaXQnKTtcbmV4cG9ydCBjb25zdCBwb3B1cEFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cEFkZCcpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBJbWFnZScpO1xuZXhwb3J0IGNvbnN0IHBvcHVwRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwRGVsZXRlJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZScpO1xuZXhwb3J0IGNvbnN0IGJ1dHRvbk9wZW5FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgYnV0dG9uT3BlbkFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgZm9ybUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhdmF0YXInKTtcbmV4cG9ydCBjb25zdCBmb3JtRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlZGl0Jyk7XG5leHBvcnQgY29uc3QgZm9ybUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhZGQnKTtcbmV4cG9ydCBjb25zdCBmb3JtRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2RlbGV0ZScpO1xuZXhwb3J0IGNvbnN0IGlucHV0QXZhdGFyVXJsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VybC1hdmF0YXInKTtcbmV4cG9ydCBjb25zdCB1c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xuZXhwb3J0IGNvbnN0IHVzZXJBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190ZXh0Jyk7XG5leHBvcnQgY29uc3QgaW5wdXRVc2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwZXJzb24taW5wdXQnKTtcbmV4cG9ydCBjb25zdCBpbnB1dFVzZXJBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNhYm91dC1pbnB1dCcpO1xuZXhwb3J0IGNvbnN0IGlucHV0UGxhY2VOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BsYWNlLWlucHV0Jyk7XG5leHBvcnQgY29uc3QgaW5wdXRQbGFjZVVybCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1cmwtaW5wdXQnKTtcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkcycpO1xuZXhwb3J0IGNvbnN0IHBvcHVwSW1nID0gcG9wdXBJbWFnZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgcG9wdXBUeHQgPSBwb3B1cEltYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGV4dCcpOyIsImltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcblxuaW1wb3J0IHtcbiAgcG9wdXBzLCBwb3B1cEF2YXRhciwgcG9wdXBFZGl0LCBwb3B1cEFkZCxcbiAgcHJvZmlsZUF2YXRhciwgYnV0dG9uT3BlbkVkaXQsIGJ1dHRvbk9wZW5BZGQsXG4gIGZvcm1BdmF0YXIsIGZvcm1FZGl0LCBmb3JtQWRkLFxuICB1c2VyTmFtZSwgdXNlckFib3V0LCBpbnB1dFVzZXJOYW1lLCBpbnB1dFVzZXJBYm91dCxcbiAgaW5wdXRBdmF0YXJVcmwsIGlucHV0UGxhY2VOYW1lLCBpbnB1dFBsYWNlVXJsLFxuICBjYXJkc0NvbnRhaW5lcixcbiAgZm9ybURlbGV0ZVxufSBmcm9tICcuL3ZhcmlhYmxlcy5qcyc7XG5pbXBvcnQgeyBjcmVhdGVDYXJkLCBkZWxldGVDYXJkIH0gZnJvbSAnLi9jYXJkLmpzJztcbmltcG9ydCB7IHJldmFsaWRhdGVGb3JtLCBlbmFibGVWYWxpZGF0aW9uIH0gZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG5pbXBvcnQgeyBjbG9zZVBvcHVwLCBvcGVuUG9wdXAgfSBmcm9tICcuL21vZGFsLmpzJztcbmltcG9ydCB7XG4gIGdldFNlcnZlclVzZXJEYXRhLCBnZXRTZXJ2ZXJJbml0aWFsQ2FyZHMsXG4gIHBhdGNoVXNlckF2YXRhciwgcGF0Y2hVc2VyRGF0YSwgcG9zdE5ld0NhcmQsIGhhbmRsZUVycm9yXG59IGZyb20gJy4vYXBpLmpzJztcbmltcG9ydCB7IHJlbmRlckxvYWRpbmcgfSBmcm9tICcuL3V0aWxzLmpzJ1xuXG5leHBvcnQgbGV0IHVzZXJJZDtcbmV4cG9ydCBsZXQgZGVsZXRlZFNlcnZlckNhcmQgPSBudWxsO1xuXG5jb25zdCBtZXN0b1NlbGVjdG9ycyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLmZvcm1fX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fc3VibWl0LWJ1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19zdWJtaXQtYnV0dG9uX2luYWN0aXZlJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZS1lcnJvcicsXG4gIGVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxufVxuXG5wcm9maWxlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwQXZhdGFyKTtcbmJ1dHRvbk9wZW5FZGl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwRWRpdCk7XG5idXR0b25PcGVuQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwQWRkKTtcbmZvcm1BdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0Jywgc3VibWl0Rm9ybUF2YXRhcik7XG5mb3JtRWRpdC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBzdWJtaXRGb3JtRWRpdCk7XG5mb3JtQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHN1Ym1pdEZvcm1BZGQpO1xuZm9ybURlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBkZWxldGVDYXJkKTtcblxucG9wdXBzLmZvckVhY2goKHBvcHVwKSA9PiB7XG4gIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSkge1xuICAgICAgY2xvc2VQb3B1cChwb3B1cClcbiAgICB9XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xuICAgICAgY2xvc2VQb3B1cChwb3B1cClcbiAgICB9XG4gIH0pXG59KVxuXG5mdW5jdGlvbiBzdWJtaXRGb3JtQXZhdGFyKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHJlbmRlckxvYWRpbmcodHJ1ZSwgZXZlbnQuc3VibWl0dGVyKTtcbiAgcGF0Y2hVc2VyQXZhdGFyKGlucHV0QXZhdGFyVXJsLnZhbHVlKVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZUF2YXRhci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dXNlckRhdGEuYXZhdGFyfSlgO1xuICAgIH0pXG4gICAgLnRoZW4oKCkgPT4gY2xvc2VQb3B1cChwb3B1cEF2YXRhcikpXG4gICAgLmZpbmFsbHkoKCkgPT4geyByZW5kZXJMb2FkaW5nKGZhbHNlLCBldmVudC5zdWJtaXR0ZXIpIH0pXG59XG5cbmZ1bmN0aW9uIHN1Ym1pdEZvcm1FZGl0KGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHJlbmRlckxvYWRpbmcodHJ1ZSwgZXZlbnQuc3VibWl0dGVyKVxuICBwYXRjaFVzZXJEYXRhKGlucHV0VXNlck5hbWUudmFsdWUsIGlucHV0VXNlckFib3V0LnZhbHVlKVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgICAgdXNlckFib3V0LnRleHRDb250ZW50ID0gdXNlckRhdGEuYWJvdXQ7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBjbG9zZVBvcHVwKHBvcHVwRWRpdCkpXG4gICAgLmZpbmFsbHkoKCkgPT4geyByZW5kZXJMb2FkaW5nKGZhbHNlLCBldmVudC5zdWJtaXR0ZXIpIH0pXG59XG5cbmZ1bmN0aW9uIHN1Ym1pdEZvcm1BZGQoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgcmVuZGVyTG9hZGluZyh0cnVlLCBldmVudC5zdWJtaXR0ZXIpXG4gIHBvc3ROZXdDYXJkKGlucHV0UGxhY2VOYW1lLnZhbHVlLCBpbnB1dFBsYWNlVXJsLnZhbHVlKVxuICAgIC50aGVuKChjYXJkcykgPT4ge1xuICAgICAgY2FyZHNDb250YWluZXIucHJlcGVuZChjcmVhdGVDYXJkKGNhcmRzKSk7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBjbG9zZVBvcHVwKHBvcHVwQWRkKSlcbiAgICAuZmluYWxseSgoKSA9PiB7IHJlbmRlckxvYWRpbmcoZmFsc2UsIGV2ZW50LnN1Ym1pdHRlcikgfSlcbn1cblxuZnVuY3Rpb24gb3BlblBvcHVwQXZhdGFyKCkge1xuICBmb3JtQXZhdGFyLnJlc2V0KCk7XG4gIHJldmFsaWRhdGVGb3JtKGZvcm1BdmF0YXIsIG1lc3RvU2VsZWN0b3JzKTtcbiAgb3BlblBvcHVwKHBvcHVwQXZhdGFyKTtcbn1cblxuZnVuY3Rpb24gb3BlblBvcHVwRWRpdCgpIHtcbiAgaW5wdXRVc2VyTmFtZS52YWx1ZSA9IHVzZXJOYW1lLnRleHRDb250ZW50O1xuICBpbnB1dFVzZXJBYm91dC52YWx1ZSA9IHVzZXJBYm91dC50ZXh0Q29udGVudDtcbiAgcmV2YWxpZGF0ZUZvcm0oZm9ybUVkaXQsIG1lc3RvU2VsZWN0b3JzKTtcbiAgb3BlblBvcHVwKHBvcHVwRWRpdCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5Qb3B1cEFkZCgpIHtcbiAgZm9ybUFkZC5yZXNldCgpO1xuICByZXZhbGlkYXRlRm9ybShmb3JtQWRkLCBtZXN0b1NlbGVjdG9ycyk7XG4gIG9wZW5Qb3B1cChwb3B1cEFkZCk7XG59XG5cbmVuYWJsZVZhbGlkYXRpb24obWVzdG9TZWxlY3RvcnMpO1xuXG5Qcm9taXNlLmFsbChbZ2V0U2VydmVyVXNlckRhdGEoKSwgZ2V0U2VydmVySW5pdGlhbENhcmRzKCldKVxuICAudGhlbihmdW5jdGlvbiAoW3VzZXJEYXRhLCBjYXJkc10pIHtcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XG4gICAgdXNlck5hbWUudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5uYW1lO1xuICAgIHVzZXJBYm91dC50ZXh0Q29udGVudCA9IHVzZXJEYXRhLmFib3V0O1xuICAgIHByb2ZpbGVBdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3VzZXJEYXRhLmF2YXRhcn0pYDtcbiAgICBjb25zb2xlLmxvZyh1c2VyRGF0YSlcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNhcmRzQ29udGFpbmVyLmFwcGVuZChjcmVhdGVDYXJkKGNhcmRzW2ldKSlcbiAgICB9XG4gICAgY29uc29sZS5sb2coY2FyZHMpXG4gIH0pXG4gIC5jYXRjaChoYW5kbGVFcnJvcikiLCIvLy9Db25maWcvLy9cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGJhc2VVcmw6IGBodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvd2JjLWNvaG9ydC0xYCxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc2MTY1MGE5Ny0wMTk4LTQ5NzctOWIxOC0xMzEyNzNhYWZmMmYnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufVxuXG4vLy/QpNGD0L3QutGG0LjRjyDQv9GA0L7QstC10YDQutC4INC+0YLQstC10YLQsC8vL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlcykge1xuICBpZiAocmVzLm9rKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gIH1cbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbn1cblxuLy8v0J7RiNC40LHQutC4LCDQutC+0YLQvtGA0YvQtSDQv9C+0L/QsNC00LDRjtGCINCyIC5jYXRjaC8vL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUVycm9yKGVycikge1xuICBjb25zb2xlLmxvZyhlcnIpO1xufVxuXG4vL9CX0LDQs9GA0YPQt9C60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INGBINGB0LXRgNCy0LXRgNCwLy8vL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZlclVzZXJEYXRhKCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLy8v0JfQsNCz0YDRg9C30LrQsCDQutCw0YDRgtC+0YfQtdC6INGBINGB0LXRgNCy0LXRgNCwLy8vL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZlckluaXRpYWxDYXJkcygpIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9Ce0LHQvdC+0LLQu9C10L3QuNC1INCw0LLQsNGC0LDRgNCwINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjy8vLy9cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGF2YXRhciB9KVxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLy8v0KDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQtSDQv9GA0L7RhNC40LvRjy8vLy9cbmV4cG9ydCBmdW5jdGlvbiBwYXRjaFVzZXJEYXRhKG5hbWUsIGFib3V0KSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSlcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9CU0L7QsdCw0LLQu9C10L3QuNC1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuC8vLy9cbmV4cG9ydCBmdW5jdGlvbiBwb3N0TmV3Q2FyZChuYW1lLCBsaW5rKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBuYW1lLCBsaW5rIH0pXG4gIH0pXG4gICAgLnRoZW4oaGFuZGxlUmVzcG9uc2UpXG59XG5cbi8vLy/Qo9C00LDQu9C10L3QuNC1INGC0L7Qu9GM0LrQviDRgdCy0L7QtdC5INC60LDRgNGC0L7Rh9C60LgvLy8vXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlU2VydmVyQ2FyZChpZCkge1xuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnNcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn1cblxuLy8vL9CU0L7QsdCw0LLQu9C10L3QuNC1INC70LDQudC60LAvLy8vXG5leHBvcnQgZnVuY3Rpb24gbGlrZUNhcmQoaWQpIHtcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcbiAgICBtZXRob2Q6ICdQVVQnLFxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxuICB9KVxuICAgIC50aGVuKGhhbmRsZVJlc3BvbnNlKVxufVxuXG4vLy8v0KPQtNCw0LvQtdC90LjQtSDQu9Cw0LnQutCwLy8vL1xuZXhwb3J0IGZ1bmN0aW9uIGRpc2xpa2VDYXJkKGlkKSB7XG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XG4gICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcbiAgfSlcbiAgICAudGhlbihoYW5kbGVSZXNwb25zZSlcbn0iLCJleHBvcnQgZnVuY3Rpb24gY2xvc2VQb3B1cChwb3B1cCkge1xuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGNsb3NlUG9wdXBFc2MpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3BlblBvcHVwKHBvcHVwKSB7XG4gIHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VQb3B1cEVzYyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZVBvcHVwRXNjKGV2ZW50KSB7XG4gIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfb3BlbmVkJyk7XG4gICAgY2xvc2VQb3B1cChwb3B1cCk7XG4gIH1cbn0iLCJpbXBvcnQgeyBoYW5kbGVFcnJvciwgbGlrZUNhcmQsIGRpc2xpa2VDYXJkLCBkZWxldGVTZXJ2ZXJDYXJkIH0gZnJvbSBcIi4vYXBpLmpzXCI7XG5pbXBvcnQgeyBjbG9zZVBvcHVwLCBvcGVuUG9wdXAgfSBmcm9tICcuL21vZGFsLmpzJztcbmltcG9ydCB7IHBvcHVwRGVsZXRlLCBwb3B1cEltYWdlLCBwb3B1cEltZywgcG9wdXBUeHQgfSBmcm9tICcuL3ZhcmlhYmxlcy5qcyc7XG5pbXBvcnQgeyB1c2VySWQsIGRlbGV0ZWRTZXJ2ZXJDYXJkIH0gZnJvbSAnLi9pbmRleC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZCkge1xuICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FyZC10ZW1wbGF0ZScpLmNvbnRlbnQ7XG4gIGNvbnN0IGNhcmROZXcgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcignLmNhcmRfX2l0ZW0nKS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRJbWFnZSA9IGNhcmROZXcucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJyk7XG4gIGNvbnN0IGNhcmREZWxldGVCdXR0b24gPSBjYXJkTmV3LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUtYnV0dG9uJyk7XG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZE5ldy5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1idXR0b24nKTtcbiAgY29uc3QgbGlrZUNvdW50ZXIgPSBjYXJkTmV3LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcbiAgY2FyZEltYWdlLnNyYyA9IGNhcmQubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGNhcmQubmFtZTtcbiAgY2FyZE5ldy5pZCA9IGNhcmQuX2lkO1xuICBjYXJkTmV3LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpLnRleHRDb250ZW50ID0gY2FyZC5uYW1lO1xuICBsaWtlQ291bnRlci50ZXh0Q29udGVudCA9IGNhcmQubGlrZXMubGVuZ3RoO1xuICAvLy8vTGlrZS8vLy9cbiAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlJykpIHtcbiAgICAgIGRlbGV0ZUxpa2UoY2FyZE5ldywgY2FyZExpa2VCdXR0b24sIGxpa2VDb3VudGVyKVxuICAgIH0gZWxzZSB7XG4gICAgICBhZGRMaWtlKGNhcmROZXcsIGNhcmRMaWtlQnV0dG9uLCBsaWtlQ291bnRlcilcbiAgICB9XG4gIH0pXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgY2FyZC5saWtlcy5sZW5ndGg7IGkrKykge1xuICAgIGlmIChjYXJkLmxpa2VzW2ldLl9pZCA9PT0gdXNlcklkKSB7XG4gICAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgICB9XG4gIH1cbiAgLy8vL0RlbGV0ZS8vLy9cbiAgY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgIGRlbGV0ZWRTZXJ2ZXJDYXJkID0gZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5jYXJkX19pdGVtJylcbiAgICBvcGVuUG9wdXAocG9wdXBEZWxldGUpO1xuICB9KVxuICBpZiAoY2FyZC5vd25lci5faWQgIT09IHVzZXJJZCkge1xuICAgIGNhcmREZWxldGVCdXR0b24ucmVtb3ZlKClcbiAgfVxuICAvLy8vRnVsbCBJbWFnZS8vLy9cbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgIHBvcHVwSW1nLnNyYyA9IGNhcmQubGluaztcbiAgICBwb3B1cEltZy5hbHQgPSBjYXJkLm5hbWU7XG4gICAgcG9wdXBUeHQudGV4dENvbnRlbnQgPSBjYXJkLm5hbWU7XG4gICAgb3BlblBvcHVwKHBvcHVwSW1hZ2UpO1xuICB9KTtcbiAgLy8vL05ldyBjYXJkLy8vL1xuICByZXR1cm4gY2FyZE5ldztcbn1cblxuLy8vL0RlbGV0ZS8vLy9cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVDYXJkKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHJldHVybiBkZWxldGVTZXJ2ZXJDYXJkKGRlbGV0ZWRTZXJ2ZXJDYXJkLmlkKVxuICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlbGV0ZWRTZXJ2ZXJDYXJkLnJlbW92ZSgpO1xuICAgICAgY2xvc2VQb3B1cChwb3B1cERlbGV0ZSk7XG4gICAgICBkZWxldGVkU2VydmVyQ2FyZCA9IG51bGw7XG4gICAgfSlcbiAgICAuY2F0Y2goaGFuZGxlRXJyb3IpXG59XG5cbi8vLy9MaWtlLy8vL1xuZnVuY3Rpb24gYWRkTGlrZShjYXJkTmV3LCBjYXJkTGlrZUJ1dHRvbiwgbGlrZUNvdW50ZXIpIHtcbiAgcmV0dXJuIGxpa2VDYXJkKGNhcmROZXcuaWQpXG4gICAgLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aDtcbiAgICB9KVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcilcbn1cblxuZnVuY3Rpb24gZGVsZXRlTGlrZShjYXJkTmV3LCBjYXJkTGlrZUJ1dHRvbiwgbGlrZUNvdW50ZXIpIHtcbiAgcmV0dXJuIGRpc2xpa2VDYXJkKGNhcmROZXcuaWQpXG4gICAgLnRoZW4oKGNhcmQpID0+IHtcbiAgICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2NhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aDtcbiAgICB9KVxuICAgIC5jYXRjaChoYW5kbGVFcnJvcilcbn0iLCJleHBvcnQgZnVuY3Rpb24gc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIHNlbGVjdG9ycykge1xuICBjb25zdCBmb3JtRXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHNlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3MpO1xuICBmb3JtRXJyb3IuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnMuZXJyb3JDbGFzcyk7XG4gIGZvcm1FcnJvci50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKSB7XG4gIGNvbnN0IGZvcm1FcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzLmlucHV0RXJyb3JDbGFzcyk7XG4gIGZvcm1FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9ycy5lcnJvckNsYXNzKTtcbiAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gJyc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSwgc2VsZWN0b3JzKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIHNlbGVjdG9ycyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQpIHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldmFsaWRhdGVGb3JtKGZvcm1FbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvblN1Ym1pdCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgaW5wdXRMaXN0LmZvckVhY2goZnVuY3Rpb24gKGlucHV0RWxlbWVudCkge1xuICAgIGhpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgc2VsZWN0b3JzKTtcbiAgfSlcbiAgaW5hY3RpdmVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5hY3RpdmVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0LCB7IGluYWN0aXZlQnV0dG9uQ2xhc3MgfSkge1xuICBidXR0b25TdWJtaXQuY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgYnV0dG9uU3VibWl0LmRpc2FibGVkID0gdHJ1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGl2ZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQsIHsgaW5hY3RpdmVCdXR0b25DbGFzcyB9KSB7XG4gIGJ1dHRvblN1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKGluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICBidXR0b25TdWJtaXQuZGlzYWJsZWQgPSBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpIHtcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgaW5hY3RpdmVTdWJtaXRCdXR0b24oYnV0dG9uU3VibWl0LCBzZWxlY3RvcnMpO1xuICB9IGVsc2Uge1xuICAgIGFjdGl2ZVN1Ym1pdEJ1dHRvbihidXR0b25TdWJtaXQsIHNlbGVjdG9ycyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbGVtZW50LCBzZWxlY3RvcnMpIHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvblN1Ym1pdCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25TdWJtaXQsIHNlbGVjdG9ycyk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChpbnB1dEVsZW1lbnQpIHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50LCBzZWxlY3RvcnMpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25TdWJtaXQsIHNlbGVjdG9ycyk7XG4gICAgfSlcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oc2VsZWN0b3JzKSB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZm9ybUVsZW1lbnQpIHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgc2VsZWN0b3JzKTtcbiAgfSlcbn0iLCJleHBvcnQgZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhsb2FkaW5nLCBidXR0b24sIGJ1dHRvblRleHQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJykge1xuICBpZiAobG9hZGluZykge1xuICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLidcbiAgfSBlbHNlIHtcbiAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0XG4gIH1cbn0iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJ1c2VySWQiLCJwb3B1cHMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwb3B1cEF2YXRhciIsInF1ZXJ5U2VsZWN0b3IiLCJwb3B1cEVkaXQiLCJwb3B1cEFkZCIsInBvcHVwSW1hZ2UiLCJwb3B1cERlbGV0ZSIsInByb2ZpbGVBdmF0YXIiLCJidXR0b25PcGVuRWRpdCIsImJ1dHRvbk9wZW5BZGQiLCJmb3JtQXZhdGFyIiwiZm9ybUVkaXQiLCJmb3JtQWRkIiwiZm9ybURlbGV0ZSIsImlucHV0QXZhdGFyVXJsIiwidXNlck5hbWUiLCJ1c2VyQWJvdXQiLCJpbnB1dFVzZXJOYW1lIiwiaW5wdXRVc2VyQWJvdXQiLCJpbnB1dFBsYWNlTmFtZSIsImlucHV0UGxhY2VVcmwiLCJjYXJkc0NvbnRhaW5lciIsInBvcHVwSW1nIiwicG9wdXBUeHQiLCJjb25maWciLCJiYXNlVXJsIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJoYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJoYW5kbGVFcnJvciIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJjbG9zZVBvcHVwIiwicG9wdXAiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VQb3B1cEVzYyIsIm9wZW5Qb3B1cCIsImFkZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImNyZWF0ZUNhcmQiLCJjYXJkIiwiY2FyZE5ldyIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJjYXJkRGVsZXRlQnV0dG9uIiwiY2FyZExpa2VCdXR0b24iLCJsaWtlQ291bnRlciIsInNyYyIsImxpbmsiLCJhbHQiLCJuYW1lIiwiaWQiLCJfaWQiLCJ0ZXh0Q29udGVudCIsImxpa2VzIiwibGVuZ3RoIiwiY29udGFpbnMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJjYXRjaCIsImRlbGV0ZUxpa2UiLCJhZGRMaWtlIiwiaSIsImRlbGV0ZWRTZXJ2ZXJDYXJkIiwidGFyZ2V0IiwiY2xvc2VzdCIsIm93bmVyIiwiaGlkZUlucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJzZWxlY3RvcnMiLCJmb3JtRXJyb3IiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicmV2YWxpZGF0ZUZvcm0iLCJmb3JtRWxlbWVudCIsImlucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsImlucHV0U2VsZWN0b3IiLCJidXR0b25TdWJtaXQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImZvckVhY2giLCJpbmFjdGl2ZVN1Ym1pdEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJoYXNJbnZhbGlkSW5wdXQiLCJhY3RpdmVTdWJtaXRCdXR0b24iLCJyZW5kZXJMb2FkaW5nIiwibG9hZGluZyIsImJ1dHRvbiIsImJ1dHRvblRleHQiLCJtZXN0b1NlbGVjdG9ycyIsImZvcm1TZWxlY3RvciIsInJlc2V0IiwidmFsdWUiLCJhdmF0YXIiLCJwcmV2ZW50RGVmYXVsdCIsInN1Ym1pdHRlciIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwidXNlckRhdGEiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImZpbmFsbHkiLCJhYm91dCIsImNhcmRzIiwicHJlcGVuZCIsImVycm9yTWVzc2FnZSIsInNob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzZXRFdmVudExpc3RlbmVycyIsImFsbCIsImFwcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=